{"version":3,"sources":["webpack:///src/app/nhapkho/nhaphang-addnew/nhaphang-addnew.page.html","webpack:///src/app/nhapkho/nhaphang-addnew/nhaphang-addnew.page.scss","webpack:///src/app/nhapkho/nhaphang-addnew/nhaphang-addnew.page.ts"],"names":["NhaphangAddnewPage","Function","toastController","ngayNhap","Date","toISOString","HanDung","LoHang","ThanhToan","loaiChungTu","loaikho","lstThanhToan","Array","MaLoai","TenLoai","loaiThanhToan","detailObjects","lstBillDetail","MaVT","TenVT","DVT","SoLuong","DonGia","GiaBanLe","GiaBanSy","ThanhTien","VAT_Percent","VAT","ChietKhau_Percent","ChietKhau","TongTien","HTTT","NhapXuatID","tenHanghoa","maHanghoa","DVNhap","showProduct","Saving","SoLuongNhap","getListHangHoa","getLoaiCT","getDSKho","getVatTu","subscribe","data","lstHangHoa","lstHangHoaAll","index","indexOf","splice","console","log","lstChungTu","getDanhsachKho","undefined","rs","lstKho","loaiCT","val","target","value","Number","loaiKho","pid","trim","values","filter","product","toLowerCase","item","push","localStorage","setItem","JSON","stringify","object","getItem","object1","parse","i","length","GiaMua","j","toString","_SoCT","randomBetween","_MaCT","presentToastMsg","addnewPhieunhaphang","code","message","msg","create","color","duration","toast","present","closeModal","selector","template"],"mappings":"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","file":"default~nhapkho-nhaphang-addnew-nhaphang-addnew-module~nhapkho-nhaphang-nhaphang-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar style=\\\"--border-width:0px!important;--background:#fff;\\\">\\r\\n\\r\\n    <ion-title style=\\\"text-align: center!important; color: #7077d6;\\\">\\r\\n      <table style=\\\"width: 100%!important; max-width: 100%!important;\\\">\\r\\n        <tr>\\r\\n          <td style=\\\"text-align: center!important;\\\">\\r\\n            <div style=\\\"text-align: center;\\\">\\r\\n              Phiếu nhập hàng\\r\\n            </div>\\r\\n          </td>\\r\\n        </tr>\\r\\n      </table>\\r\\n\\r\\n    </ion-title>\\r\\n\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-item lines=\\\"none\\\"\\r\\n        style=\\\"--background:#fff; --padding-start: 10px!important; --padding-end:0px!important;--padding-top:0px!important;--border-width:0px!important;\\\">\\r\\n\\r\\n        <ion-icon name=\\\"close-circle-outline\\\" style=\\\"color: #7077d6; font-size: 25px;\\\" (click)=\\\"closeModal()\\\">\\r\\n        </ion-icon>\\r\\n\\r\\n      </ion-item>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div style=\\\"background-color: #ddd;\\\">\\r\\n    <div style=\\\"padding: 10px;\\\">\\r\\n\\r\\n      <div style=\\\"margin-top: 20px;\\\">\\r\\n\\r\\n\\r\\n        <table style=\\\"width: 100%!important; max-width: 100%!important;\\\">\\r\\n          <tr>\\r\\n            <td style=\\\"padding-left: 5px;width:100%;font-size: 17px; font-weight: bold; color: #7077d6;\\\">\\r\\n              Loại chứng từ:\\r\\n            </td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <td style=\\\"font-size: 20px!important;padding-left: 5px; padding-top: 5px; text-align: justify;width:100%;\\\">\\r\\n              <select value=\\\"{{loaiChungTu}}\\\" (change)=\\\"onLoaiCTChange($event)\\\"\\r\\n                style=\\\"font-size: 20px!important; width: 100%!important; max-width: 100%!important; --padding-top: 0px; --padding-end: 5px; --padding-bottom: 0px; --padding-start: 0px; border: solid 0px #ddd;background-color: #fff;\\\">\\r\\n                <option *ngFor=\\\"let item of lstChungTu\\\" value=\\\"{{item.LoaiCTID}}\\\">\\r\\n                  {{item.DienGiai}}\\r\\n                </option>\\r\\n              </select>\\r\\n            </td>\\r\\n          </tr>\\r\\n        </table>\\r\\n\\r\\n        <table style=\\\"width: 100%!important; max-width: 100%!important; margin-top: 10px;\\\">\\r\\n          <tr>\\r\\n            <td\\r\\n              style=\\\"font-weight: bold;padding-left: 5px;width:100%; text-align: justify;font-size: 17px;color: #7077d6;\\\">\\r\\n              Ngày tháng:\\r\\n            </td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <td style=\\\"padding: 0px!important;padding-left: 5px;padding-top: 5px;\\\">\\r\\n              <ion-datetime displayFormat=\\\"DD/MM/YYYY\\\" min=\\\"2015-01-01\\\" max=\\\"2025-12-31\\\" [(ngModel)]=\\\"ngayNhap\\\"\\r\\n                Style=\\\"padding-left: 10px;width: 100%; text-align:justify; border-radius: 3px; color: #000;--padding-top: 5px;--padding-end: 5;--padding-bottom: 5px;--padding-start: 5px;background-color: #fff; border: solid 1px #ddd;font-size: 20px;\\\">\\r\\n              </ion-datetime>\\r\\n            </td>\\r\\n          </tr>\\r\\n        </table>\\r\\n\\r\\n        <table style=\\\"width: 100%!important; max-width: 100%!important; margin-top: 10px;\\\">\\r\\n          <tr>\\r\\n            <td style=\\\"width:100%;font-size: 17px;color: #7077d6;padding-left: 5px;font-weight: bold;\\\">\\r\\n              Tên Nhà Cung Cấp:\\r\\n            </td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n\\r\\n            <td style=\\\"padding-left: 5px; text-align: justify;padding-top: 5px;padding-top: 5px;\\\">\\r\\n              <ion-input type=\\\"text\\\" [(ngModel)]=\\\"DVNhap\\\"\\r\\n                style=\\\"border:solid 1px #ddd; border-radius: 2px;background-color: #fff;\\\">\\r\\n              </ion-input>\\r\\n            </td>\\r\\n          </tr>\\r\\n        </table>\\r\\n\\r\\n        <table style=\\\"width: 100%!important; max-width: 100%!important; margin-top: 10px;\\\">\\r\\n          <tr>\\r\\n            <td style=\\\"padding-left: 5px;width:100%;font-size: 17px;color: #7077d6;font-weight: bold;\\\">\\r\\n              Kho nhập:\\r\\n            </td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n\\r\\n            <td style=\\\"padding-left: 5px; text-align: justify;width:60%;padding-top: 5px;\\\">\\r\\n              <div style=\\\"font-size: 20px;\\\">\\r\\n                <select value=\\\"{{loaikho}}\\\" (ionChange)=\\\"onkhoChange($event)\\\"\\r\\n                  style=\\\"width: 100%!important; max-width: 100%!important; --padding-top: 0px; --padding-end: 5px; --padding-bottom: 0px; --padding-start: 0px; border: solid 0px #ddd;background-color: #fff;\\\">\\r\\n                  <option *ngFor=\\\"let items of lstKho\\\" value=\\\"{{items.MaKho}}\\\">{{items.TenKho}}\\r\\n                  </option>\\r\\n                </select>\\r\\n              </div>\\r\\n\\r\\n            </td>\\r\\n          </tr>\\r\\n        </table>\\r\\n\\r\\n        <table\\r\\n          style=\\\"padding-left: 5px;width: 100%!important; max-width: 100%!important; margin-top: 10px;font-size: 20px;\\\">\\r\\n          <tr>\\r\\n            <td style=\\\"color: #7077d6;padding-left: 5px;font-size:17px;font-weight: bold;\\\">\\r\\n              Tên hàng hóa\\r\\n            </td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <td style=\\\"padding-left: 5px; text-align: justify;padding-top: 5px;\\\">\\r\\n              <ion-input type=\\\"text\\\" (ionBlur)=\\\"closeList()\\\" (ionInput)=\\\"filterProduct($event)\\\" [(ngModel)]=\\\"tenHanghoa\\\"\\r\\n                (ngModelChange)=\\\"doSomething()\\\"\\r\\n                style=\\\"border:solid 1px #ddd; border-radius: 2px; font-weight: bold;background-color: #fff;\\\">\\r\\n              </ion-input>\\r\\n            </td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <td style=\\\"width:100%\\\" *ngIf=\\\"this.showProduct\\\">\\r\\n\\r\\n              <div *ngFor=\\\"let item of lstHangHoa\\\" style=\\\"padding: 5px!important;font-size: 15px;\\\">\\r\\n                <div (click)=\\\"selectHanghoa(item)\\\">\\r\\n                  <table style=\\\"width:100%;  max-width: 100%!important;background-color: #fff;\\\">\\r\\n                    <tr>\\r\\n                      <td style=\\\"width:50%\\\">\\r\\n                        {{item.TenVT}}\\r\\n                      </td>\\r\\n                      <td style=\\\"width:20%; padding: 5px;\\\">{{item.DVT}}</td>\\r\\n                      <td style=\\\"width:30%;\\\">{{item.GiaMua}}</td>\\r\\n                    </tr>\\r\\n                  </table>\\r\\n                </div>\\r\\n\\r\\n              </div>\\r\\n\\r\\n            </td>\\r\\n          </tr>\\r\\n        </table>\\r\\n\\r\\n        <table style=\\\"width: 100%!important; max-width: 100%!important; margin-top: 10px;font-size: 20px;\\\">\\r\\n          <tr>\\r\\n            <td\\r\\n              style=\\\"font-weight: bold;font-size:17px;color: #7077d6;width: 100%; padding-left:5px; text-align: justify; padding-right: 5px!important;\\\">\\r\\n              Số lượng:\\r\\n            </td>\\r\\n\\r\\n          </tr>\\r\\n          <tr>\\r\\n\\r\\n            <td style=\\\"width: 100%; padding-left: 5px; text-align: justify;padding-top: 5px;\\\">\\r\\n              <ion-input [(ngModel)]=\\\"SoLuongNhap\\\" type=\\\"tel\\\"\\r\\n                style=\\\"border:solid 1px #ddd; border-radius: 2px;background-color: #fff;\\\">\\r\\n              </ion-input>\\r\\n            </td>\\r\\n          </tr>\\r\\n\\r\\n\\r\\n\\r\\n        </table>\\r\\n\\r\\n        <table style=\\\"width: 100%!important; max-width: 100%!important; margin-top: 10px;\\\">\\r\\n          <tr>\\r\\n\\r\\n            <td\\r\\n              style=\\\"font-weight: bold;font-size: 17px;color: #7077d6;width: 100%; padding-left: 5px; text-align: justify; padding-right: 5px!important;margin-top: 10px;\\\">\\r\\n              Hạn dùng:\\r\\n            </td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n\\r\\n            <td style=\\\"width: 100%; padding-left: 5px; text-align: justify;padding-top: 5px;\\\">\\r\\n              <ion-datetime displayFormat=\\\"DD/MM/YYYY\\\" min=\\\"2015-01-01\\\" max=\\\"2025-12-31\\\" [(ngModel)]=\\\"HanDung\\\"\\r\\n                Style=\\\"width: 100%; text-align:justify; border-radius: 3px; color: #000;--padding-top: 5px;--padding-end: 5;--padding-bottom: 5px;--padding-start: 5px;background-color: #fff; border: solid 1px #ddd;font-size: 20px;\\\">\\r\\n              </ion-datetime>\\r\\n            </td>\\r\\n          </tr>\\r\\n        </table>\\r\\n\\r\\n        <table style=\\\"width: 100%!important; max-width: 100%!important; margin-top: 10px;\\\">\\r\\n          <tr>\\r\\n            <td\\r\\n              style=\\\"font-weight: bold;font-size: 17px;color: #7077d6;width: 100%; padding-left: 5px; text-align: justify; padding-right: 5px!important;margin-top: 10px;\\\">\\r\\n              Lô hàng:\\r\\n            </td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n\\r\\n            <td style=\\\"width: 100%; padding-left: 5px; text-align: justify;padding-top: 5px;\\\">\\r\\n              <ion-input [(ngModel)]=\\\"LoHang\\\" type=\\\"tel\\\"\\r\\n                style=\\\"border:solid 1px #ddd; border-radius: 2px;background-color: #fff;\\\">\\r\\n              </ion-input>\\r\\n            </td>\\r\\n          </tr>\\r\\n        </table>\\r\\n\\r\\n        <table style=\\\"width: 100%!important; max-width: 100%!important; margin-top: 10px;\\\">\\r\\n          <tr>\\r\\n            <td style=\\\"padding-left: 5px; text-align: justify;\\\">\\r\\n              <div (click)=\\\"updateBillDetail()\\\"\\r\\n                style=\\\"padding: 10px; margin-top: 10px; width: 100%; float: right; text-align: center; border-radius: 4px; background-color: #8c6b44; color: #fff;\\\">\\r\\n                Ghi nhận\\r\\n              </div>\\r\\n            </td>\\r\\n          </tr>\\r\\n        </table>\\r\\n\\r\\n        <table\\r\\n          style=\\\"padding-left: 5px; width: 100%!important; max-width: 100%!important; margin-top: 15px; margin-bottom: 15px;\\\">\\r\\n          <tr>\\r\\n            <td style=\\\"padding-bottom: 5px!important; font-weight: bold;\\\">\\r\\n              <ion-icon name=\\\"options-outline\\\"\\r\\n                style=\\\"font-weight: bold;color: #7077d6;font-size: 25px; margin-bottom: -6px;\\\"></ion-icon>\\r\\n              &nbsp;Thông tin đơn thuốc\\r\\n            </td>\\r\\n            <td style=\\\"width: 40px; text-align: right;\\\">\\r\\n              &nbsp;\\r\\n            </td>\\r\\n          </tr>\\r\\n        </table>\\r\\n\\r\\n        <table *ngIf=\\\"this.lstBillDetail.length > 0\\\"\\r\\n          style=\\\"padding-left: 5px;color: #7077d6;width:100%;  max-width: 100%!important; margin-top: 10px;font-weight: bold;background-color: #fff;\\\">\\r\\n          <tr>\\r\\n            <td style=\\\"width:50%\\\">\\r\\n              Tên VT (Đơn vị tính)\\r\\n            </td>\\r\\n            <td style=\\\"width:20%; padding: 5px;\\\">SL</td>\\r\\n            <td style=\\\"width:30%; padding: 5px;text-align: end;\\\">Thành tiền</td>\\r\\n          </tr>\\r\\n        </table>\\r\\n\\r\\n        <div style=\\\"padding-left: 5px;padding: 5px!important; border-radius: 2px;\\\"\\r\\n          *ngIf=\\\"this.lstBillDetail.length > 0\\\">\\r\\n\\r\\n          <table *ngFor=\\\"let items of lstBillDetail\\\"\\r\\n            style=\\\"width:100%;  max-width: 100%!important;background-color: #fff;\\\">\\r\\n            <tr>\\r\\n              <td style=\\\"width:50%\\\">{{items.TenVT}}({{items.DVT}})</td>\\r\\n              <td style=\\\"width:20%; padding: 5px;text-align: justify;\\\">{{items.SoLuong}}</td>\\r\\n              <td style=\\\"width:30%; padding: 5px;text-align: end;\\\">{{items.ThanhTien}}</td>\\r\\n            </tr>\\r\\n\\r\\n          </table>\\r\\n        </div>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n      </div>\\r\\n\\r\\n      <div style=\\\"margin-top: 20px;background-color: #fff;padding-left: 5px;\\\">\\r\\n\\r\\n        <table style=\\\"width: 100%!important; max-width: 100%!important; margin-top: 10px;\\\">\\r\\n          <tr>\\r\\n            <td style=\\\"width:50%\\\">\\r\\n              Tổng tiền:\\r\\n            </td>\\r\\n            <td style=\\\"text-align: justify;\\\">\\r\\n              <ion-input [(ngModel)]=\\\"TongTien\\\" type=\\\"tel\\\"\\r\\n                style=\\\"border:solid 1px #ddd; border-radius: 2px;background-color: #fff;\\\">\\r\\n              </ion-input>\\r\\n            </td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <td style=\\\"width:50%\\\">\\r\\n              Thanh toán:\\r\\n            </td>\\r\\n            <td style=\\\"text-align: justify;padding-top: 5px;\\\">\\r\\n              <ion-input [(ngModel)]=\\\"ThanhToan\\\" type=\\\"tel\\\"\\r\\n                style=\\\"border:solid 1px #ddd; border-radius: 2px;background-color: #fff;\\\">\\r\\n              </ion-input>\\r\\n            </td>\\r\\n          </tr>\\r\\n        </table>\\r\\n\\r\\n        <table style=\\\"width: 100%!important; max-width: 100%!important; margin-top: 10px;\\\">\\r\\n          <tr>\\r\\n            <td style=\\\"width:50%\\\">\\r\\n              Hình thức thanh toán:\\r\\n            </td>\\r\\n            <td style=\\\"padding-left: 0px; text-align: justify;width:60%\\\">\\r\\n              <ion-select interface=\\\"action-sheet\\\" value=\\\"{{loaiThanhToan}}\\\"\\r\\n                style=\\\"width: 100%!important; max-width: 100%!important; --padding-top: 0px; --padding-end: 5px; --padding-bottom: 0px; --padding-start: 0px; border: solid 0px #ddd;background-color: #fff;\\\">\\r\\n                <ion-select-option *ngFor=\\\"let items of lstThanhToan\\\" value=\\\"{{items.MaLoai}}\\\">\\r\\n                  {{items.TenLoai}}</ion-select-option>\\r\\n\\r\\n              </ion-select>\\r\\n            </td>\\r\\n          </tr>\\r\\n        </table>\\r\\n\\r\\n        <table style=\\\"width: 100%!important; max-width: 100%!important; margin-top: 20px; margin-bottom: 10px;\\\">\\r\\n          <tr>\\r\\n            <td style=\\\"padding: 0px;\\\">\\r\\n\\r\\n              <div *ngIf=\\\"this.Saving\\\"\\r\\n                style=\\\"padding: 10px; margin-top: 10px; width: 100%; float: right; text-align: center; border-radius: 4px; background-color: #bebaf0; color: #fff;\\\">\\r\\n                <ion-spinner name=\\\"lines-small\\\"\\r\\n                  style=\\\"margin-bottom: -10px!important; margin-top: -5px!important; color: #fff;\\\"></ion-spinner>\\r\\n                &nbsp;Đang xử lý đơn hàng, vui lòng đợi!\\r\\n              </div>\\r\\n\\r\\n              <div *ngIf=\\\"!this.Saving\\\" (click)=\\\"savePhieunhap()\\\"\\r\\n                style=\\\"padding: 10px; margin-top: 10px; width: 100%; float: right; text-align: center; border-radius: 4px; background-color: #4b42cf; color: #fff;\\\">\\r\\n                Lưu đơn hàng\\r\\n              </div>\\r\\n\\r\\n            </td>\\r\\n          </tr>\\r\\n        </table>\\r\\n\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</ion-content>\";","export default \".import {\\n  padding: 0 0 0 10px;\\n}\\n.import-title {\\n  color: #0764ae;\\n  font-weight: 600;\\n  display: flex;\\n  align-items: center;\\n  margin: 15px 0;\\n}\\n.import-icon {\\n  font-size: 25px;\\n}\\n.import-label span {\\n  color: red;\\n}\\n.import-label2 {\\n  margin-bottom: 8px;\\n}\\n.import-label2 span {\\n  color: red;\\n}\\n.import-label2 label {\\n  display: block;\\n  margin-bottom: 8px;\\n}\\n.import-add {\\n  display: flex;\\n  /* align-items: center; */\\n  gap: 5px;\\n  color: #196fb4;\\n  padding: 10px;\\n}\\n.import-add ion-icon {\\n  margin-left: auto;\\n}\\n.import td {\\n  padding-bottom: 10px;\\n  padding-right: 10px;\\n}\\ntable {\\n  width: 100%;\\n}\\ninput {\\n  width: 100%;\\n  padding: 8px 10px 8px;\\n  background: #F0F5FF;\\n  border-radius: 5px;\\n  border: 1px solid #F0F5FF;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbmhhcGtoby9uaGFwaGFuZy1hZGRuZXcvbmhhcGhhbmctYWRkbmV3LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVJLG1CQUFBO0FBQUo7QUFFSTtFQUNJLGNBQUE7RUFDQSxnQkFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLGNBQUE7QUFBUjtBQUdJO0VBQ0ksZUFBQTtBQURSO0FBS1E7RUFDSSxVQUFBO0FBSFo7QUFPSTtFQUNJLGtCQUFBO0FBTFI7QUFPUTtFQUNJLFVBQUE7QUFMWjtBQVFRO0VBQ0ksY0FBQTtFQUNBLGtCQUFBO0FBTlo7QUFVSTtFQUNJLGFBQUE7RUFDQSx5QkFBQTtFQUNBLFFBQUE7RUFDQSxjQUFBO0VBQ0EsYUFBQTtBQVJSO0FBVVE7RUFDSSxpQkFBQTtBQVJaO0FBYUk7RUFDSSxvQkFBQTtFQUNBLG1CQUFBO0FBWFI7QUFlQTtFQUNJLFdBQUE7QUFaSjtBQWVBO0VBQ0ksV0FBQTtFQUNBLHFCQUFBO0VBQ0EsbUJBQUE7RUFDQSxrQkFBQTtFQUNBLHlCQUFBO0FBWkoiLCJmaWxlIjoic3JjL2FwcC9uaGFwa2hvL25oYXBoYW5nLWFkZG5ldy9uaGFwaGFuZy1hZGRuZXcucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmltcG9ydCB7XHJcblxyXG4gICAgcGFkZGluZzogMCAwIDAgMTBweDtcclxuXHJcbiAgICAmLXRpdGxlIHtcclxuICAgICAgICBjb2xvcjogIzA3NjRhZTtcclxuICAgICAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICBtYXJnaW46IDE1cHggMDtcclxuICAgIH1cclxuXHJcbiAgICAmLWljb24ge1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMjVweDtcclxuICAgIH1cclxuXHJcbiAgICAmLWxhYmVsIHtcclxuICAgICAgICBzcGFuIHtcclxuICAgICAgICAgICAgY29sb3I6IHJlZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgJi1sYWJlbDIge1xyXG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcclxuXHJcbiAgICAgICAgc3BhbiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiByZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsYWJlbCB7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICYtYWRkIHtcclxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgIC8qIGFsaWduLWl0ZW1zOiBjZW50ZXI7ICovXHJcbiAgICAgICAgZ2FwOiA1cHg7XHJcbiAgICAgICAgY29sb3I6ICMxOTZmYjQ7XHJcbiAgICAgICAgcGFkZGluZzogMTBweDtcclxuXHJcbiAgICAgICAgaW9uLWljb24ge1xyXG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogYXV0bztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHRkIHtcclxuICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDtcclxuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xyXG4gICAgfVxyXG59XHJcblxyXG50YWJsZSB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuaW5wdXQge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBwYWRkaW5nOiA4cHggMTBweCA4cHg7XHJcbiAgICBiYWNrZ3JvdW5kOiAjRjBGNUZGO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI0YwRjVGRjtcclxufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { FunctionService } from '../../function.service';\r\nimport _ from 'lodash'\r\nimport { isNgTemplate } from '@angular/compiler';\r\nimport { ToastController } from '@ionic/angular';\r\n@Component({\r\n  selector: 'app-nhaphang-addnew',\r\n  templateUrl: './nhaphang-addnew.page.html',\r\n  styleUrls: ['./nhaphang-addnew.page.scss'],\r\n})\r\nexport class NhaphangAddnewPage implements OnInit {\r\n  ngayNhap: string = new Date().toISOString();\r\n  HanDung: string = new Date().toISOString();\r\n  LoHang: string = \"\"\r\n  ThanhToan: number = 0;\r\n  loaiChungTu: number = 4;\r\n  loaiChungTuAll: any;\r\n  lstKho: Array<\r\n    {\r\n      MaKho: string,\r\n      TenKho: string\r\n    }\r\n  >;\r\n  loaiKhoXuatAll: any;\r\n  loaikho: string = \"TK\";\r\n\r\n  lstThanhToan = new Array(\r\n    {\r\n      MaLoai: 0,\r\n      TenLoai: \"Tiền mặt\"\r\n    },\r\n    {\r\n      MaLoai: 1,\r\n      TenLoai: \"Chuyển khoản\"\r\n    }\r\n  )\r\n  loaiThanhToan: number = 0;\r\n  lstHangHoa: Array<{ MaDuocQG: string, MaVT: string, TenVT: string, DVT: string, GiaBanLe: number }>;\r\n  lstHangHoaAll: any;\r\n  detailObjects = new Array({\r\n    // {\r\n    //   \"MaVT\": \"HH0031\",\r\n    //   \"DVT\": \"Chai\",\r\n    //   \"SoLuong\": 3,\r\n    //   \"DonGia\": 63500,\r\n    //   \"GiaBanLe\": 0,\r\n    //   \"GiaBanSy\": 0,\r\n    //   \"ThanhTien\": 190500,\r\n    //   \"VAT_Percent\": 0,\r\n    //   \"VAT\": 0,\r\n    //   \"ChietKhau_Percent\": 0,\r\n    //   \"ChietKhau\": 0,\r\n    //   \"TongTien\": 190500,\r\n    //   \"HTTT\": \"TM\",\r\n    //   \"LoHang\": \"0490623\",\r\n    //   \"HanDung\": \"2025-06-30\"\r\n    // }\r\n\r\n    \"MaVT\": \"HH0031\",\r\n    \"TenVT\": \"\",\r\n    \"DVT\": \"Chai\",\r\n    \"SoLuong\": 0,\r\n    \"DonGia\": 0,\r\n    \"GiaBanLe\": 0,\r\n    \"GiaBanSy\": 0,\r\n    \"ThanhTien\": 0,\r\n    \"VAT_Percent\": 0,\r\n    \"VAT\": 0,\r\n    \"ChietKhau_Percent\": 0,\r\n    \"ChietKhau\": 0,\r\n    \"TongTien\": 0,\r\n    \"HTTT\": \"TM\",\r\n    \"LoHang\": \"0490623\",\r\n    \"HanDung\": \"2025-06-30\",\r\n    \"NhapXuatID\": 0,\r\n    // \"GiaBQ\": 317.5000,\r\n    // \"UserIDCreated\": 1,\r\n    // \"CreatedTime\": \"2023-10-10T15:59:27.190\",\r\n    // \"UpdatedTime\": \"2023-11-13T17:11:32.113\",\r\n    // \"UserIDUpdated\": 1\r\n  })\r\n  lstBillDetail = new Array({\r\n    MaVT: \"HH0031\",\r\n    TenVT: \"\",\r\n    DVT: \"Chai\",\r\n    SoLuong: 0,\r\n    DonGia: 0,\r\n    GiaBanLe: 0,\r\n    GiaBanSy: 0,\r\n    ThanhTien: 0,\r\n    VAT_Percent: 0,\r\n    VAT: 0,\r\n    ChietKhau_Percent: 0,\r\n    ChietKhau: 0,\r\n    TongTien: 0,\r\n    HTTT: \"TM\",\r\n    LoHang: \"0490623\",\r\n    HanDung: \"2025-06-30\",\r\n    NhapXuatID: 0\r\n  })\r\n  lstChungTu: Array<{ LoaiCTID: string, LoaiNX: string, DienGiai: string }>;\r\n  tenHanghoa: string = \"\";\r\n  maHanghoa: string = \"\";\r\n  DVNhap: string = \"\";;\r\n  showProduct: boolean = false;\r\n  Saving: boolean = false;\r\n  SoLuongNhap: number = 0;\r\n  TongTien: number = 0;\r\n  constructor(\r\n    public Function: FunctionService,\r\n    public toastController: ToastController\r\n  ) {\r\n\r\n    this.getListHangHoa();\r\n    this.getLoaiCT();\r\n    this.getDSKho();\r\n    this.lstBillDetail = [];\r\n    this.loaiChungTu = 4;\r\n    this.loaikho = \"TK\";\r\n    this.loaiThanhToan = 0;\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  getListHangHoa() {\r\n    this.Function.getVatTu().subscribe(data => {\r\n      this.lstHangHoa = data;\r\n      this.lstHangHoaAll = this.lstHangHoa;\r\n    })\r\n  }\r\n\r\n  getLoaiCT() {\r\n    this.Function.getLoaiCT().subscribe(data => {\r\n      let index = data.indexOf(1)\r\n      data.splice(index);\r\n      index = data.indexOf(2);\r\n      data.splice(index);\r\n      data.splice(1, 1);\r\n      console.log(\"141\", data);\r\n      this.lstChungTu = data;\r\n    })\r\n  }\r\n  chonHangHoa() {\r\n    this.showProduct = true;\r\n  }\r\n\r\n  getDSKho() {\r\n    let data = this.Function.getDanhsachKho();\r\n    if (data != undefined) {\r\n      data.subscribe(rs => {\r\n        this.lstKho = rs;\r\n      })\r\n    }\r\n  }\r\n\r\n  onLoaiCTChange(loaiCT: any) {\r\n    let val = loaiCT.target.value;\r\n    console.log(\"146\", val)\r\n    this.loaiChungTu = Number(val);\r\n  }\r\n\r\n  onkhoChange(loaiKho: any) {\r\n    let val = loaiKho.target.value;\r\n    console.log(\"153\", val)\r\n    this.loaikho = val;\r\n  }\r\n  closeList() {\r\n    if (this.tenHanghoa == \"\") {\r\n      this.showProduct = false;\r\n    }\r\n  }\r\n\r\n  doSomething() {\r\n    if (this.tenHanghoa != \"\") {\r\n      this.showProduct = true;\r\n    }\r\n    else {\r\n      this.showProduct = false;\r\n    }\r\n\r\n  }\r\n\r\n  filterProduct(pid: any) {\r\n    let val = pid.target.value;\r\n    if (this.lstHangHoa != null) {\r\n      if (val && val.trim() != '') {\r\n        this.lstHangHoa = _.values(this.lstHangHoaAll);\r\n        this.lstHangHoa = this.lstHangHoa.filter((product) => {\r\n          return (product.TenVT.toLowerCase().indexOf(val.toLowerCase()) > -1);\r\n        })\r\n      }\r\n      else {\r\n        this.lstHangHoa = this.lstHangHoaAll;\r\n      }\r\n    }\r\n  }\r\n\r\n  selectHanghoa(item: any) {\r\n    this.tenHanghoa = item.TenVT\r\n    this.maHanghoa = item.MaVT\r\n    this.showProduct = false;\r\n    this.detailObjects = [];\r\n    this.detailObjects.push(item);\r\n    localStorage.setItem(\"objects\", JSON.stringify(this.detailObjects));\r\n  }\r\n\r\n  updateBillDetail() {\r\n    let object = localStorage.getItem(\"objects\");\r\n    let object1 = JSON.parse(object)\r\n    for (let i = 0; i <= object1.length; i++) {\r\n      let item = object1[i]\r\n      if (item != undefined) {\r\n        if (item.MaVT != '') {\r\n          this.lstBillDetail.push({\r\n            MaVT: item.MaVT,\r\n            TenVT: item.TenVT,\r\n            DVT: item.DVT,\r\n            SoLuong: Number(this.SoLuongNhap),\r\n            DonGia: item.GiaMua,\r\n            GiaBanLe: item.GiaBanLe,\r\n            GiaBanSy: item.GiaBanSy,\r\n            ThanhTien: 0,\r\n            VAT_Percent: 0,\r\n            VAT: 0,\r\n            ChietKhau_Percent: 0,\r\n            ChietKhau: 0,\r\n            TongTien: this.TongTien,\r\n            HTTT: \"TM\",\r\n            LoHang: this.LoHang,\r\n            HanDung: this.HanDung,\r\n            NhapXuatID: 0\r\n          });\r\n        }\r\n\r\n      }\r\n\r\n\r\n\r\n    }\r\n\r\n    this.detailObjects = [];\r\n    console.log(\"149\", this.lstBillDetail)\r\n    this.TongTien = 0;\r\n    for (let j = 0; j <= this.lstBillDetail.length - 1; j++) {\r\n      let item = this.lstBillDetail[j];\r\n      if (item != undefined) {\r\n        item.ThanhTien = (item.DonGia * Number(this.SoLuongNhap.toString()))\r\n        item.TongTien = item.ThanhTien + item.ChietKhau\r\n      }\r\n      this.TongTien = this.TongTien + item.TongTien\r\n    }\r\n    this.tenHanghoa = \"\";\r\n    this.SoLuongNhap = 0;\r\n  }\r\n\r\n  savePhieunhap() {\r\n    let _SoCT = Number(this.Function.randomBetween(1, 9999))\r\n    let _MaCT = this.Function.randomBetween(1, 9999)\r\n    console.log(\"Ma chung tu\", _SoCT)\r\n    if (this.loaiChungTu == 1) {\r\n      //nhap mua\r\n      _MaCT = \"NM\" + _MaCT\r\n    }\r\n    else if (this.loaiChungTu == 3) {\r\n      //nhap hang\r\n      _MaCT = \"NH\" + _MaCT\r\n    }\r\n    else if (this.loaiChungTu == 4) {\r\n      //nhap ton\r\n      _MaCT = \"NT\" + _MaCT\r\n    }\r\n    if (this.lstBillDetail.length == 0) {\r\n      this.presentToastMsg(\"Đơn nhập hàng không hợp lệ !\")\r\n      return;\r\n    }\r\n    this.Saving = true;\r\n    let data = this.Function.addnewPhieunhaphang(this.loaiChungTu, _SoCT, _MaCT, this.ngayNhap, this.DVNhap, this.loaikho.toString(), this.lstBillDetail)\r\n    if (data != null) {\r\n      data.subscribe(rs => {\r\n        console.log(\"277\", rs)\r\n        if (rs.code == 200) {\r\n          this.presentToastMsg(rs.message)\r\n        }\r\n        this.Saving = false;\r\n      })\r\n    }\r\n  }\r\n\r\n  async presentToastMsg(msg) {\r\n    const toast = await this.toastController.create({\r\n      message: '<center>' + msg + '</center>',\r\n      color: 'danger',\r\n      duration: 2000\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  closeModal() {\r\n    this.Function.closeModal()\r\n  }\r\n\r\n}\r\n"]}